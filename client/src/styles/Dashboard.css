/* =========================================================
   THEME TOKENS
   ========================================================= */
html, body {
  height: 100%;
  margin: 0;
  overflow: hidden;            /* page shell never scrolls */
}

:root {
  --ink: #0f172a;              /* main text */
  --muted: #64748b;            /* secondary text */
  --border: #e2e8f0;           /* outlines, separators */
  --card: #ffffff;             /* card backgrounds */
  --ring: 0 0 0 4px rgba(14,165,233,0.18);
  --shadow-1: 0 8px 20px rgba(2, 6, 23, 0.06);
  --shadow-2: 0 16px 40px rgba(2, 6, 23, 0.10);
  --r-sm: 10px;
  --r-md: 12px;
  --r-lg: 14px;
  --r-xl: 16px;

  /* Sidebar width token (used by Sidebar.css & layout) */
  --sb-w: 240px;

  /* Light background fallback (used via var(--bg, ‚Ä¶) if you add it later) */
  /* --bg: #f7fafc; */
}
@media (max-width: 1024px) {
  :root { --sb-w: 76px; }
}

/* Accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* =========================================================
   PAGE SHELL circles
   ========================================================= */
.dashboard-container {
  position: relative;
  z-index: 1;
  height: 100svh;              /* exact viewport height (mobile safe) */
  padding: 0;                  /* no vertical padding on shell */
  overflow: hidden;            /* prevent page-level scroll */
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";

  /* gradient + base background (light fallback via second arg) */
  background:
    radial-gradient(1200px 600px at 50% -20%, rgba(30,199,255,0.06), transparent 60%),
    var(--bg-dark, #f7fafc);
  box-sizing: border-box;
}
.dashboard-container::before,
.dashboard-container::after {
  content: "";
  position: fixed;
  inset: -15%;
  pointer-events: none;
  z-index: 0;
  filter: blur(36px);
  background:
    radial-gradient(32% 32% at 15% 25%, rgba(14,165,233,.10), transparent 60%),
    radial-gradient(30% 30% at 85% 70%, rgba(34,211,238,.08), transparent 60%),
    radial-gradient(28% 28% at 60% 15%, rgba(59,130,246,.08), transparent 60%);
  animation: dashboardDrift 22s ease-in-out infinite alternate;
}
.dashboard-container::after {
  animation-duration: 28s;
  animation-delay: -6s;
  opacity: .8;
}
@keyframes dashboardDrift {
  0%   { transform: translate3d(-2%, -1%, 0) scale(1); }
  50%  { transform: translate3d(1.5%, 2%, 0)  scale(1.03); }
  100% { transform: translate3d(3%, -1%, 0)  scale(1.01); }
}

/* =========================================================
   APP SHELL (sidebar + main content)
   ========================================================= */
.dashboard-layout {
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100%;               /* fill container */
  min-height: 100%;           /* belt & suspenders */
  background: var(--bg-dark, #f7fafc);
}

.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;

  min-width: 0;               /* fix overflow on grids */
  min-height: 0;              /* allow inner scroll */
  overflow: auto;             /* all scrolling happens here */
  padding: 24px 16px;
  box-sizing: border-box;
}

/* =========================================================
   HEADER
   ========================================================= */
.dashboard-header {
  width: 100%;
  max-width: 980px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  padding: 0 4px;
  box-sizing: border-box;
  position: sticky;
  top: 8px;
  z-index: 5;
  background: transparent;
}
.header-left, .header-right { display: flex; align-items: center; gap: 12px; }
.user-info { display: flex; align-items: center; gap: 12px; }

.profile-picture {
  width: 44px; height: 44px; border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(14,165,233,0.45);
  box-shadow: var(--shadow-1);
  transition: transform .18s ease, box-shadow .18s ease;
}
.profile-picture:hover { transform: translateY(-1px); box-shadow: var(--shadow-2); }

/* =========================================================
   BUTTONS
   ========================================================= */
.card-button,
.logout-button,
.create-map-button,
.map-tile .map-button,
.delete-button {
  border-radius: var(--r-md);
  padding: 12px 14px;
  font-weight: 700;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .18s ease, color .18s ease, border-color .18s ease;
  border: 1px solid var(--border);
}

/* Primary gradient buttons */
.logout-button,
.create-map-button,
.map-tile .map-button {
  border: none;
  background-size: 200% 100%;
  background-image: linear-gradient(135deg, #22d3ee, #0ea5e9, #22d3ee);
  color: #0b1320;
  box-shadow: 0 10px 24px rgba(14,165,233,0.25);
  position: relative;
  overflow: hidden;
}
.logout-button:hover,
.create-map-button:hover,
.map-tile .map-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(14,165,233,0.32);
  background-position: 100% 0;
}
.logout-button::after,
.create-map-button::after,
.map-tile .map-button::after {
  content: "";
  position: absolute; left: 50%; top: 50%;
  width: 0; height: 0; opacity: 0;
  transform: translate(-50%, -50%);
  background: radial-gradient(closest-side, rgba(255,255,255,.45), transparent 70%);
  transition: width .35s ease, height .35s ease, opacity .35s ease;
}
.logout-button:hover::after,
.create-map-button:hover::after,
.map-tile .map-button:hover::after {
  width: 260%; height: 260%; opacity: .25;
}

/* Secondary buttons */
.card-button, .delete-button { background: #f8fafc; color: var(--ink); }
.card-button:hover, .delete-button:hover { background: #eef2f7; transform: translateY(-1px); }

/* Text-only button */
.details-button {
  background: transparent; border: none; color: #22d3ee;
  padding: 12px 14px; border-radius: var(--r-sm);
  font-weight: 700; cursor: pointer;
  transition: background .18s ease, transform .12s ease;
}
.details-button:hover { background: rgba(14,165,233,0.08); color: #38bdf8; transform: translateY(-1px); }

/* Keyboard focus */
.details-button:focus-visible,
.delete-button:focus-visible,
.card-button:focus-visible,
.logout-button:focus-visible,
.create-map-button:focus-visible,
.map-tile .map-button:focus-visible,
.search-input:focus-visible,
.new-map-input:focus-visible,
.form-input:focus-visible,
.close-button:focus-visible {
  outline: none;
  box-shadow: var(--ring), 0 0 0 1px rgba(14,165,233,0.55) inset;
  border-color: #0ea5e9;
}

/* =========================================================
   SEARCH + SECTION TITLE
   ========================================================= */
.button-container {
  width: 100%;
  max-width: 980px;
  display: flex; flex-wrap: wrap;
  gap: 10px;
  margin: 6px auto 10px;
  position: sticky; top: 8px; z-index: 5; background: transparent;
}
.search-container {
  width: 100%;
  max-width: 980px;
  margin: 8px auto 14px;
  position: sticky; top: 8px; z-index: 5; background: transparent;
}
.search-input {
  width: 100%;
  padding: 14px;
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  background: var(--card);
  font-size: 1rem; color: var(--ink);
  transition: border-color .18s ease, box-shadow .18s ease;
  box-sizing: border-box;
}
.search-input:focus { outline: none; border-color: #0ea5e9; box-shadow: var(--ring); }
.search-container::after {
  content: "üîç"; position: absolute; right: 12px; top: 50%;
  transform: translateY(-50%); font-size: 18px; opacity: .55; pointer-events: none;
}

/* Section title */
h3 {
  width: 100%; max-width: 980px;
  margin: 18px auto 8px;
  font-size: clamp(1rem, 1.2vw, 1.08rem);
  color: var(--ink); font-weight: 800;
  position: sticky; top: 8px; z-index: 5; background: transparent;
}

/* =========================================================
   MAPS GRID + TILES
   ========================================================= */
.maps-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
  gap: 14px;
  width: 100%; max-width: 980px;
  padding: 16px;
  border-radius: 16px;
  background: rgba(255,255,255,0.6);
  border: 1px solid rgba(226,232,240,0.8);
  backdrop-filter: blur(8px);
  box-shadow: var(--shadow-1);
  box-sizing: border-box;
}
.maps-grid:empty {
  display: grid; place-items: center; min-height: 180px;
}
.maps-grid:empty::before {
  content: "No maps yet ‚Äî create one or join by ID ‚ú®";
  color: #6b7280; font-size: .98rem; text-align: center;
}

.map-tile {
  background: rgba(255,255,255,0.85);
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  box-shadow: var(--shadow-1);
  padding: 14px;
  display: grid;
  grid-template-rows: auto auto; /* open + delete */
  align-content: space-between;
  gap: 10px;
  transition: transform .12s ease, box-shadow .12s ease, border-color .18s ease, background .2s ease;
}
.map-tile:hover {
  transform: translateY(-2px);
  background: #fff;
  box-shadow: var(--shadow-2);
  border-color: rgba(14,165,233,0.22);
}
.map-tile .map-button {
  display: inline-block; width: 100%;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* delete icon */
.delete-button { align-self: stretch; }
.trash-icon { position: relative; width: 22px; height: 30px; margin: 0 auto; }
.lid {
  position: absolute; top: -4px; width: 24px; height: 7px; border-radius: 4px;
  background: #0284c7; transition: transform .16s ease;
}
.bin {
  position: absolute; bottom: 0; width: 22px; height: 22px; border-radius: 0 0 6px 6px;
  background: #22d3ee; display: flex; justify-content: center; align-items: center;
}
.face {
  position: relative; width: 16px; height: 9px; background: #fff; border-radius: 999px; overflow: hidden;
}
.face::before, .face::after {
  content: ""; position: absolute; top: 1.5px; width: 3.5px; height: 3.5px; background: #334155; border-radius: 50%;
}
.face::before { left: 4px; } .face::after { right: 4px; }
.delete-button:hover .lid { transform: rotate(-12deg); }

/* =========================================================
   FORMS + MODALS
   ========================================================= */
.new-map-form { display: flex; flex-direction: column; gap: 12px; width: 100%; }
.new-map-input, .form-input {
  width: 100%;
  padding: 14px;
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  background: var(--card);
  font-size: 1rem; color: var(--ink);
  transition: border-color .18s, box-shadow .18s;
  box-sizing: border-box;
}
.new-map-input:focus, .form-input:focus { outline: none; border-color: #0ea5e9; box-shadow: var(--ring); }

.form-group { margin-bottom: 12px; text-align: left; }
.form-group label {
  font-size: .92rem; color: var(--muted);
  margin-bottom: .4rem; display: block; font-weight: 600;
}
.error-text, .error-message { color: #e11d48; font-size: .93rem; margin-top: 4px; }

.modal {
  position: fixed; inset: 0;
  background: rgba(2, 6, 23, 0.45);
  backdrop-filter: blur(2px);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.modal-content {
  width: 92%; max-width: 560px;
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(226,232,240,0.9);
  border-radius: var(--r-xl);
  box-shadow: 0 25px 60px rgba(2, 6, 23, 0.25), 0 10px 20px rgba(2, 6, 23, 0.12);
  padding: 20px;
  animation: slideIn .24s ease;
  box-sizing: border-box;
}
.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 10px;
}
.modal-header h2 { margin: 0; font-size: 1.08rem; color: var(--ink); font-weight: 800; }
.close-button {
  background: transparent; border: none; color: #0ea5e9;
  font-size: 1.6rem; line-height: 1; cursor: pointer;
  padding: 6px 10px; border-radius: var(--r-sm);
  transition: background .18s ease, transform .12s ease;
}
.close-button:hover { background: rgba(14,165,233,0.08); transform: translateY(-1px); }

.modal-buttons { display: flex; gap: 12px; justify-content: flex-end; margin-top: 8px; }
@media (max-width: 480px) {
  .modal-buttons { flex-direction: column-reverse; }
  .modal-buttons .card-button { width: 100%; }
}

/* =========================================================
   ANIMATIONS & RESPONSIVE
   ========================================================= */
@keyframes slideIn {
  from { transform: translateY(-12px); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}

@media (max-width: 768px) {
  .profile-picture { width: 40px; height: 40px; }
  .maps-grid { grid-template-columns: 1fr; }
}

/* Shimmer skeleton */
.maps-grid.loading {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
  gap: 14px;
}
.maps-grid.loading .map-tile {
  position: relative; pointer-events: none; min-height: 108px;
  background: linear-gradient(90deg,
    rgba(226,232,240,.55) 25%,
    rgba(226,232,240,.85) 37%,
    rgba(226,232,240,.55) 63%);
  background-size: 400% 100%;
  animation: shimmer 1.1s ease-in-out infinite;
  border: 1px solid rgba(226,232,240,.9);
}
@keyframes shimmer {
  0% { background-position: 100% 0; }
  100% { background-position: 0 0; }
}

/* Firefox scrollbar */
@supports (scrollbar-color: auto) {
  * { scrollbar-width: thin; scrollbar-color: rgba(148,163,184,.6) transparent; }
}

/* =========================================================
   DARK THEME OVERRIDES
   ========================================================= */
:root[data-theme="dark"] {
  --ink: #f1f5f9;
  --muted: #94a3b8;
  --border: #334155;
  --card: #1e293b;
  --ring: 0 0 0 4px rgba(30, 199, 255, 0.25);
  --shadow-1: 0 8px 20px rgba(0, 0, 0, 0.35);
  --shadow-2: 0 16px 40px rgba(0, 0, 0, 0.55);
  --bg-dark: #0f172a;         /* base dark bg used in page/app shells */
}

/* app shell bg was hard-coded in light */
:root[data-theme="dark"] .dashboard-layout {
  background: var(--bg-dark);
}

/* Glass backgrounds */
:root[data-theme="dark"] .maps-grid {
  background: rgba(30, 41, 59, 0.55);
  border-color: rgba(51, 65, 85, 0.9);
  box-shadow: var(--shadow-1);
}

/* tiles/cards */
:root[data-theme="dark"] .map-tile {
  background: rgba(30, 41, 59, 0.85);
  border-color: var(--border);
}
:root[data-theme="dark"] .map-tile:hover {
  background: #223044;
  border-color: rgba(56, 189, 248, 0.25);
}

/* neutral buttons */
:root[data-theme="dark"] .card-button,
:root[data-theme="dark"] .delete-button {
  background: #0f172a;
  color: var(--ink);
  border-color: var(--border);
}
:root[data-theme="dark"] .card-button:hover,
:root[data-theme="dark"] .delete-button:hover {
  background: #152235;
}

/* inputs */
:root[data-theme="dark"] .search-input,
:root[data-theme="dark"] .new-map-input,
:root[data-theme="dark"] .form-input {
  background: var(--card);
  color: var(--ink);
  border-color: var(--border);
}
:root[data-theme="dark"] .search-container::after { opacity: .7; }

/* modal sheet */
:root[data-theme="dark"] .modal-content {
  background: rgba(15, 23, 42, 0.92);
  border-color: rgba(51, 65, 85, 0.9);
  box-shadow: 0 25px 60px rgba(0,0,0,0.45), 0 10px 20px rgba(0,0,0,0.28);
}

/* profile picture ring lighter on dark */
:root[data-theme="dark"] .profile-picture {
  border-color: rgba(14,165,233,0.35);
}

/* ensure text color is correct on dark shell */
:root[data-theme="dark"] .dashboard-container { color: var(--ink); }

/*  Chane the className="learning-space-title to color white */
:root[data-theme="dark"] .learning-space-title {
  color: #ffffff;
}

:root[data-theme="dark"] .user-greeting {
  color: #ffffff;
}

:root[data-theme="dark"] .sb__profile-name {
  color: black;  /* darker grey in dark theme */
}

/* Choose input file design */
.form-input[type="file"] {
  position: relative;
  padding: 10px 14px;
  font-size: 0.9rem;
  color: #334155;
  background: linear-gradient(135deg, #f8fafc, #e2e8f0);
  border: 1px solid #cbd5e1;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.25s ease;
}


.form-input[type="file"]::-webkit-file-upload-button {
  visibility: hidden;
}

.form-input[type="file"]::before {
  content: "üìÅ  Choose File";
  display: inline-block;
  color: #fff;
  background: linear-gradient(135deg, #0ea5e9, #3b82f6);
  border-radius: 8px;
  padding: 8px 14px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* Hover effect */
.form-input[type="file"]:hover::before {
  background: linear-gradient(135deg, #38bdf8, #60a5fa);
  transform: translateY(-1px);
}

/* Small glow when active */
.form-input[type="file"]:active::before {
  box-shadow: 0 0 0 3px rgba(14,165,233,0.3);
}

